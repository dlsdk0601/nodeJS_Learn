# NodeJS 배우기

지금까지 어깨넘어와 구글을 통해서 배운 node로 개인 프로젝트를 진행했었는데, 이번 기회에 제대로 배워보려 합니다.
항상 제대로 배워보고 싶어서, 기회만 봤었는데 이번에 기회가 되서 차근차근 배워보려합니다.

프로그래밍적인 부분을 학습하기전에 먼저 기본 이론은 여기 README.md에 정리 해보려합니다.

<br />

## 실행 방법

git clone을 받으 신 후,

> npm i

로 node_modules을 다운 받으시고,

> npm start

로컬 서버를 키신 후, localhost:3000 접속

## Web 동작 방식

user / client 단이 있습니다.
흔히 유저가 브라우저로 접속했을 경우 입니다.

유저는 url입력란에 도메인을 치고 접속합니다.
이 도메인은 실제 주소가 아닙니다. 일반인들이 쉽게 인지 할 수 있게하기 위함이고 최종적으로 이 URL을 입력하게 되면 어딘가의 서버로 연결됩니다.

이렇게 연결하게 되면 해당 서버로 요청을 보내게 되며 그 IP 주소는 도메인에 속합니다.
그리고 연결 후, 서버에서는 클라이언트로 응답을 다시 보내게 됩니다.

이 응답은 HTML 파일일 수도 있고, JSON 또는 XML을 비롯한 다른 종류의 데이터일 수도 있습니다. 이런 데이터를 받고나서의 처리는 클라이언트단이 해결해야하는 일입니다.

nodeJS는 이렇게 요청을 받았을때, 응답을 보내는 역할을 하는 서버 사이드에서 코드를 말합니다.

### Core Modules

node는 각 파일마다 명확한 역할이 있어야합니다.
그리고 제 3자 모듈을 사용하기 위해서는 라이브러리를 다운 받아야하지만, 기본적인 core modules만 사용 할 수 있습니다.

이 기본 core Modules는

- http
  => 서버를 생성하고, 요청을 보내는 것과 같은 작업을 도와준다.
- https
  => 모든 전송 데이터가 암호화되는 SSL 암호화 서버 생성을 도와준다
- fs
- path
- os

입니다.

### node 라이플 사이클

node app.js (app.js 실행) => script 시작 => 코드 분석 후, 변수와 함수를 등록 => 실행을 멈추지 않고 계속 돌려놓음

위의 라이프 사이클을 지키기 위해서, node의 이벤트 루프 라는 개념 때문입니다.

node가 관리하는 이벤트 루프는 작업이 남아 있는 한 계속해서 작동하는 루프 프로세스로 EventListener가 있는한 계속 작동합니다.

node가 이런 라이플 사이클을 가지는 이유는, 단일 스레드 js를 실행하기 때문입니다.


### http status code

2xx : 성공 코드
- 200: Operation succeeded
- 201: Success, resource created

3xx : 리다이렉션이 발생
- 301: moved permanently

4xx : client side error
- 401: Not authenticated
- 403: Not authorized
- 404: Not found
- 422: Invalid input

5xx : server side error
- 500: server error

### REST API 
모던 웹 개발에서는 무조건적으로 html 텍스트를 사용하진 않음. 제일 대표적인 예시로 어플이 있는데, 어플은 서버에서 어플만의 
소스를 다운 받지, html을 다운 받지 않는다. 
이런 경우, 위에서 처럼 작업 했던 Node APllication과 상호작용이 되지 않는다. 
왜냐하면 프론트단에서는 어떻게든 서버로부터 데이터를 받아야하기 때문이다. 

두 번째로 React같은 SPA에서는 하나의 index.html로 구성되어 있으며, 서버에서 매번 html 페이지를 렌더링 하지 않는다. 

위의 경우만 보더라도, REST API는 효율적이다. 

물론 구글, 공공포탈 같이 open API를 제공하는 기업의 API를 받아오기 위해서는, REST API가 절대적으로 필요하다. 

### REST API 작성하기에 알아야할 규칙

- 일괄된 intreface를 사용한다. 
API는 엔드 포인트만 봐도 예측 가능해야하며, 공개된 경우에는 문서화가 잘 되어야한다.

- 무상태 상호작용
서버는 클라이언트와 완전히 분리되어 있고 히스토리를 공유하지 않는다. 따라서 연결 히스토리가 저장되지 않고 
들어오는 모든 요청에 대해 사전 요청을 보내지 않은것으로 처리하므로 어떤 세션도 사용하지 않는다. 
이전 요청과 독립적으로 기능하는지 반드시 확인 필요

- 캐싱 가능 원칙 
헤더를 전송해 클라이언트에게 응답의 유효기간을 알려줌으로써, 클라이언트가 응답을 캐실 할 수 있도록 해주는 기능
